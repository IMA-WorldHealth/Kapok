<!-- TODO Add translation keys -->

<header data-header>
  {{'BALANCE.BUILD_BALANCE' | translate}}
</header>

<main>
  <div class="panel panel-default">
    <div class="panel-heading">{{'BALANCE.DOCUMENT_CONFIG' | translate}}</div>
    <div class="panel-body">
      <form>
        <div class="form-group">
          <label>{{'BALANCE.LANGUAGE' | translate}}</label>

          <div>
            <span ng-repeat="language in configuration.language.options">
              <button
                class="btn btn-default btn-lg"
                ng-class="{'active' : configuration.language.selected===language}"
                ng-click="selectConfiguration('language', language)">{{language.label}}</button>
            </span>
          </div>
        </div>

        <div class="form-group">
          <label class="control-label col-xs-4 required">
            {{ "BALANCE.FISCAL_YEAR" | translate }}
          </label>
          <div>
            <select class="form-bhima" ng-model="session.fy_id">
              <option ng-repeat="fy in model.fiscalYears.data" ng-value="fy.id">
                {{fy.fiscal_year_txt}}
              </option>
            </select>
          </div>
        </div>

        <!-- Links swapped out to allow target _blank (open PDF in new tab) -->
        <button
          class="btn btn-default"
          ng-disabled="session.building"
          ng-click="generateDocument()" ng-if="!generatedDocumentPath">{{session.building ? 'Loading' : 'Generate Document'}}
        </button>

        <a class="btn btn-success" href="{{generatedDocumentPath}}" target="_blank" ng-if="generatedDocumentPath" ng-click="clearPath()">Document Build Success - Open Document</a>
      </form>
    </div>
  </div>
</main>
